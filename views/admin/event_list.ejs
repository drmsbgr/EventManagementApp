<div class="d-flex justify-content-between align-items-center mb-4">
  <h1 class="display-6 fw-bold">
    <i class="fas fa-list-alt me-2 text-primary"></i> Etkinlik Yönetimi
  </h1>
  <a href="/admin/events/create" class="btn btn-success btn-lg">
    <i class="fas fa-plus me-2"></i> Yeni Etkinlik Ekle
  </a>
</div>
<p class="lead text-muted">
  Sisteminizdeki kayıtlı tüm etkinlikleri görüntüleyin ve yönetin.
</p>

<hr />

<div class="card shadow-lg">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover table-striped mb-0">
        <thead class="bg-light text-muted">
          <tr>
            <th scope="col" style="width: 5%">#ID</th>
            <th scope="col" style="width: 30%">Başlık</th>
            <th scope="col" style="width: 15%">Tarih</th>
            <th scope="col" style="width: 15%">Konum</th>
            <th scope="col" style="width: 10%">Kontenjan</th>
            <th scope="col" style="width: 10%">Yayınlandı</th>
            <th scope="col" style="width: 15%">İşlemler</th>
          </tr>
        </thead>
        <tbody>
          <% if (events && events.length > 0) { %> <% events.forEach(event => {
          %>
          <tr>
            <th scope="row"><%= event.id %></th>
            <td>
              <strong><%= event.title %></strong>
              <br />
              <small class="text-muted"><%= event.slug %></small>
            </td>
            <td>
              <%= new Date(event.date).toLocaleDateString('tr-TR', { year:
              'numeric', month: 'short', day: 'numeric', hour: '2-digit',
              minute: '2-digit' }) %>
            </td>
            <td><%= event.location %></td>
            <td><%= event.quota %></td>
            <td>
              <% if (event.isPublished) { %>
              <span class="badge bg-success"
                ><i class="fas fa-check"></i> Evet</span
              >
              <% } else { %>
              <span class="badge bg-warning text-dark"
                ><i class="fas fa-clock"></i> Hayır</span
              >
              <% } %>
            </td>
            <td>
              <a
                href="/admin/events/edit/<%= event.id %>"
                class="btn btn-sm btn-info text-white me-1"
                title="Düzenle"
              >
                <i class="fas fa-edit"></i>
              </a>
              <form
                action="/admin/events/delete"
                method="POST"
                class="d-inline"
              >
                <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
                <input type="hidden" name="eventId" value="<%= event.id %>" />
                <button type="submit" class="btn btn-sm btn-danger" title="Sil">
                  <i class="fas fa-trash-alt"></i>
                </button>
              </form>
            </td>
          </tr>
          <% }); %> <% } else { %>
          <tr>
            <td colspan="7" class="text-center text-muted py-4">
              Sistemde kayıtlı etkinlik bulunmamaktadır. Hemen yeni bir etkinlik
              ekleyin!
            </td>
          </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>
</div>
