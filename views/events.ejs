<h1 class="display-5 fw-bold mb-4 text-center">Tüm Etkinliklerimiz</h1>
<p class="lead text-center text-muted mb-5">
  Yaklaşan etkinlikleri tarihe ve konuma göre filtreleyerek size en uygun olanı
  bulun.
</p>

<div class="row">
  <div class="col-lg-3 mb-4">
    <div class="card shadow-sm sticky-top" style="top: 20px">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0"><i class="fas fa-filter me-2"></i> Filtrele ve Ara</h5>
      </div>
      <div class="card-body">
        <form action="/events" method="GET">
          <div class="mb-3">
            <label for="search" class="form-label fw-bold"
              >Anahtar Kelime</label
            >
            <input
              type="text"
              class="form-control"
              id="search"
              name="q"
              placeholder="Başlıkta ara..."
              value="<%= filters.q || '' %>"
              />
          </div>

          <div class="mb-3">
            <label for="dateFilter" class="form-label fw-bold">Tarih Aralığı</label>
      <select class="form-select" id="dateFilter" name="date">
        <option value="" <%= filters.date === '' ? 'selected' : '' %>>Tüm Tarihler

        </option>
        <option value="today" <%= filters.date === 'today' ? 'selected' : '' %>>Bugün

        </option>
        <option value="week" <%= filters.date === 'week' ? 'selected' : '' %>>Bu Hafta

        </option>
        <option value="month" <%= filters.date === 'month' ? 'selected' : '' %>>Bu Ay

        </option>
        <option value="future" <%= filters.date === 'future' ? 'selected' : '' %>>Gelecek Etkinlikler
          
        </option>
      </select>
</div>

          <div class="mb-3">
            <label for="locationFilter" class="form-label fw-bold">Konum</label>
            <input
              type="text"
              class="form-control"
              id="locationFilter"
              name="location"
              placeholder="Konumda ara..."
              value="<%= filters.location || '' %>"
            />
          </div>

          <div class="d-grid gap-2">
            <button type="submit" class="btn btn-primary mt-2">
              <i class="fas fa-search me-1"></i> Filtreleri Uygula
            </button>
            <a href="/events" class="btn btn-outline-secondary"
              >Filtreleri Sıfırla</a
            >
          </div>
        </form>
      </div>
    </div>
  </div>

  <div class="col-lg-9">
    <div class="row row-cols-1 row-cols-md-2 g-4">
      <% if (events && events.length > 0) { %> <% events.forEach(event => { %>
      <div class="col">
        <div class="card h-100 shadow-sm transition-hover">
          <div class="row g-0">
            <div class="col-md-4">
              <img
                src="<%= event.imagePath || '/static/img/default-event.png' %>"
                class="img-fluid rounded-start h-100"
                alt="<%= event.title %> Görseli"
                style="object-fit: cover"
              />
            </div>

            <div class="col-md-8">
              <div class="card-body d-flex flex-column h-100">
                <h5 class="card-title fw-bold text-dark"><%= event.title %></h5>

                <p class="card-text text-muted mb-2 small">
                  <i class="fas fa-calendar-alt me-1 text-info"></i>
                  <%= new Date(event.date).toLocaleDateString('tr-TR', { year:
                  'numeric', month: 'short', day: 'numeric', hour: '2-digit',
                  minute: '2-digit' }) %>
                  <br />
                  <i class="fas fa-map-marker-alt me-1 text-success"></i>
                  <%= event.location %>
                </p>

                <p class="card-text flex-grow-1">
                  <%= event.desc.substring(0, 120) %>...
                </p>

                <div
                  class="mt-auto d-flex justify-content-between align-items-center"
                >
                  <a
                    href="/events/<%= event.slug %>"
                    class="btn btn-primary btn-sm"
                  >
                    <i class="fas fa-info-circle me-1"></i> Detay
                  </a>
                  <small class="text-muted">
                    <i class="fas fa-eye me-1"></i> Görüntüleme: <%=
                    event.numOfViews %>
                  </small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <% }); %> <% } else { %>
      <div class="col-12">
        <div class="alert alert-warning text-center" role="alert">
          <i class="fas fa-exclamation-triangle me-2"></i> Aradığınız kriterlere
          uygun etkinlik bulunamadı.
        </div>
      </div>
      <% } %>
    </div>
  </div>
</div>

<style>
  /* Ana sayfadan alınan hover efekti */
  .transition-hover:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15) !important;
    transition: transform 0.3s, box-shadow 0.3s;
  }
</style>
